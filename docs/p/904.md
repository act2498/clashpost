---
title: "部落总奖杯是如何计算的"
description: "每当你翻看部落简介页面时，一定会看到一个部落的总奖杯数，那么这玩意是怎么算的呢？废话不多说，我们直接进入主题。这个奖杯数并不是拿部落所有人的奖杯简单相加，而是加权之后的结果，具体如下。"
module: posts-knowledge
canonical: /p/904
featuredImg: /p/904/E0C366D34A3F1577889952FBDD047DD8.jpg
authorId: cocservice
lastCreated: 2020-02-16T18:19:03+08:00
lastUpdated: 2024-04-16T22:54:06+08:00
tags: cups
---

<PostHistory>
2024-04-15 修订：修改文章中的例子，使文章更易懂，顺便将文章中的图片高清化。
</PostHistory>

注意：

- 本文只介绍部落总奖杯数的算法，如想了解单个玩家的奖杯获取机制，请移步：[联机模式杯段介绍及各杯段奖励一览](/p/1010)。
- 本文内容与部落都城的奖杯无关，都城的奖杯算法见：[都城突袭周末机制详解](/p/6491)。

## 概述

什么是部落总奖杯数呢？我们先看一个图。

<Pic src="/p/904/E0C366D34A3F1577889952FBDD047DD8.jpg" width="2732" height="2048" alt="部落总奖杯数" :lazyLoading="false" />

注意上图中框出来的部分，**第一个奖杯数是家乡的，第二个是夜世界的。家乡和夜世界的算法相同。**

## 计算方式

这个奖杯数并不是拿部落所有人的奖杯简单相加，而是加权之后的结果，具体如下。

<Table maxWidth="360px">

| 成员排名 (m) | 计分的百分比 (p) |
|     --:     |       --:       |
|    1 - 10   |       50%       |
|   11 - 20   |       25%       |
|   21 - 30   |       12%       |
|   31 - 40   |       10%       |
|   41 - 50   |        3%       |

</Table>

为了便于大家理解，我暂时不把公式写出来，而是先举个例子。

假如某个部落有 22 人，所有成员的奖杯数如下：

<Table maxWidth="360px">

| 排名 |  奖杯数  |
| --:  |   --:   |
|   1  |  5 888  |
|   2  |  5 541  |
|   3  |  5 136  |
|   4  |  4 902  |
|   5  |  4 825  |
|   6  |  4 399  |
|   7  |  4 167  |
|   8  |  3 721  |
|   9  |  3 500  |
|  10  |  3 333  |
|  11  |  3 248  |
|  12  |  3 134  |
|  13  |  3 006  |
|  14  |  2 968  |
|  15  |  2 908  |
|  16  |  2 825  |
|  17  |  2 790  |
|  18  |  2 763  |
|  19  |  2 619  |
|  20  |  2 324  |
|  21  |  1 919  |
|  22  |  1 145  |

</Table>

设部落总奖杯数为 $S$，则：

$$
\begin{align}
S =\, & 5888 \times 50\% + 5541 \times 50\% + \cdots + 3333 \times 50\% \,+  \\
      & 3248 \times 25\% + 3134 \times 25\% + \cdots + 2324 \times 25\% \,+  \\
      & 1919 \times 12\% + 1145 \times 12\% \\
  =\, & 30\,219.93
\end{align}
$$

第 23 到第 50 名不存在，按 0 计算，最终结果就是 30 219.93 杯。

当然游戏内计算部落奖杯时会向下取整，每一次求和都会删掉小数点后面的部分，所以**游戏中显示的最终结果一定小于你算出来的**。比如说上表的第二名是 5 541 奖杯，那么他只能给部落贡献 2770 杯，而不是 2770.5 或 2771 杯。如果使用精确算法，那么这个部落的总奖杯数就是 30 213 杯。

## 公式

接下来用一种比较学霸范的方式表达。

设 $m_1$ 到 $m_{50}$ 分别表示部落里第 1 个到第 50 个玩家的奖杯数，$p_1$ 到 $p_{50}$ 分别表示部落里第 1 个到第 50 个玩家计入总数的百分比，$S$ 表示部落的总奖杯数，则：

$$
\begin{align}
S = & \, \lfloor m_{1}p_{1} \rfloor + \lfloor m_{2}p_{2} \rfloor + \lfloor m_{3}p_{3} \rfloor + \cdots + \lfloor m_{50}p_{50} \rfloor \\
  = & \sum_{n=1}^{50} \lfloor m_{n}p_{n} \rfloor \\
  = & \sum_{n=1}^{10} \lfloor m_{n} \cdot 50\% \rfloor + \sum_{n=11}^{20} \lfloor m_{n} \cdot 25\% \rfloor + \sum_{n=21}^{30} + \lfloor m_{n} \cdot 12\% \rfloor + \\
    & \sum_{n=31}^{40} \lfloor m_{n} \cdot 10\% \rfloor + \sum_{n=41}^{50} \lfloor m_{n} \cdot 3\% \rfloor
\end{align}
$$

什么？没看懂？没事，会算就行。